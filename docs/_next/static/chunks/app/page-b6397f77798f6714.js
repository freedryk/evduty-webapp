(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4959:e=>{e.exports={page:"page_page__VqFNK",main:"page_main__fjrYt",ctas:"page_ctas__g7cvS",primary:"page_primary__suRN7",secondary:"page_secondary__B1LcN",footer:"page_footer__sPG9Z",logo:"page_logo__w4jrD"}},5580:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var o=n(5155),a=n(2115),s=n(7650);async function i(e,t){return console.log("Logging in with email:",e),await fetch("https://api.evduty.net/v1/account/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,device:{id:"A",model:"A",type:"ANDROID"}}),timeout:20})}async function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console.log("get token:",e),await fetch("https://api.evduty.net/".concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(e)},params:n})}let c=(0,a.createContext)();function l(){let e=(0,s.useFormStatus)();return console.log("Submit pending:",e.pending),(0,o.jsx)("button",{type:"submit",disabled:e.pending,children:e.pending?"Logging in...":"Login"})}function d(){let{setToken:e}=(0,a.useContext)(c);async function t(t){console.log("handleLogin:",t);let n=t.get("email"),o=t.get("password"),a=await i(n,o),s=await a.json();console.log("Login response:",s),e(s)}return(0,o.jsxs)("form",{action:t,children:[(0,o.jsx)("input",{type:"text",name:"email",placeholder:"Email"}),(0,o.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),(0,o.jsx)(l,{})]})}function p(){let[e,t]=(0,a.useState)(null),{token:n,setToken:s}=(0,a.useContext)(c);return(0,a.useEffect)(()=>{(async()=>{try{let e=await r(n.accessToken,"v1/account/stations"),o=await e.json();t(o)}catch(e){console.error("Error fetching data:",e)}})()},[n]),console.log("data:",e),(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:"Main Menu"}),(0,o.jsx)("div",{children:JSON.stringify(e)}),(0,o.jsx)("button",{onClick:()=>t(Math.random()),children:"reset"})]})}var g=n(4959),u=n.n(g);function h(){let[e,t]=(0,a.useState)(),n=void 0!==e;console.log("Is logged in:",n);let s=n?(0,o.jsx)(p,{}):(0,o.jsx)(d,{});return console.log("Content:",s),(0,o.jsx)("div",{className:u().container,children:(0,o.jsx)(c.Provider,{value:{token:e,setToken:t},children:s})})}},8581:(e,t,n)=>{Promise.resolve().then(n.bind(n,5580))}},e=>{var t=t=>e(e.s=t);e.O(0,[572,441,684,358],()=>t(8581)),_N_E=e.O()}]);